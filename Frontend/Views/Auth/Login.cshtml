<form id="loginForm">
    <div class="form-group mb-3">
        <label for="username">Username or Email</label>
        <input id="username" name="UsernameOrEmail" class="form-control" required />
    </div>
    <div class="form-group mb-3">
        <label for="password">Password</label>
        <input id="password" name="Password" type="password" class="form-control" required />
    </div>
    <button type="submit" class="btn btn-primary w-100">Login</button>
</form>

<script>
    document.getElementById("loginForm").addEventListener("submit", async (e) => {
        e.preventDefault();

        const data = {
            UsernameOrEmail: document.getElementById("username").value,
            Password: document.getElementById("password").value
        };

        const res = await fetch("/Auth/LoginApi", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        });

        const result = await res.json();

        if (result.success) {
            localStorage.setItem("token", result.token);
            localStorage.setItem("user", JSON.stringify(result.user));
            window.location.href = "/";
        } else {
            alert(result.message || "Login failed");
        }
    });
</script>
